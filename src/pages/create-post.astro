---
import Layout from '../layouts/Layout.astro';
import { requireAuth } from '../lib/auth';

const session = requireAuth(Astro.cookies);
if (!session) {
  return Astro.redirect('/login');
}
---

<Layout title="Create Post">
  <div class="container my-5">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="mb-4">
          <h1 class="display-4 gradient-text font-weight-bold">Create New Post</h1>
          <p class="text-muted">Share your thoughts with the community</p>
        </div>

        <div class="card shadow-sm">
          <div class="card-body p-4">
            <form method="POST" action="/api/posts/create" enctype="application/x-www-form-urlencoded">
              <div class="form-group">
                <label for="title" class="font-weight-bold">Post Title</label>
                <input 
                  type="text" 
                  class="form-control form-control-lg" 
                  id="title" 
                  name="title" 
                  placeholder="Enter an engaging title..."
                  required
                >
              </div>
              
              <div class="form-group">
                <label for="content" class="font-weight-bold">Content</label>
                <textarea 
                  class="form-control" 
                  id="content" 
                  name="content" 
                  rows="16" 
                  placeholder="Write your story..."
                  required
                ></textarea>
                <small class="form-text text-muted">Write in plain text or markdown format</small>
              </div>
              
              <div class="mt-4">
                <button type="submit" class="btn btn-gradient btn-lg">Publish Post</button>
                <a href="/dashboard" class="btn btn-secondary btn-lg ml-2">Cancel</a>
              </div>
            </form>
          </div>
        </div>

        
      </div>
    </div>
  </div>
</Layout>